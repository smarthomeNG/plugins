# Metadata for the plugin
plugin:
    # Global plugin attributes
    type: interface                   # plugin type (gateway, interface, protocol, system, web)
    description:
        de: 'Ansteuerung von AVM FRITZ!Boxen, WLAN-Repeatern, DECT Steckdosen, etc.'
        en: 'Get and send data from/to AVM devices such as the FRITZ!Box, Wifi Repeaters or DECT sockets.'
    maintainer: sisamiwe
    tester: psilo, onkelandy, aschwith, bmx
    state: develop                  # change to ready when done with development
#    keywords: iot xyz
    documentation: http://smarthomeng.de/user/plugins/avm/user_doc.html
    support: https://knx-user-forum.de/forum/supportforen/smarthome-py/934835-avm-plugin

    version: 2.0.2                  # Plugin version (must match the version specified in __init__.py)
    sh_minversion: 1.8              # minimum shNG version to use this plugin
#    sh_maxversion:                 # maximum shNG version to use this plugin (leave empty if latest)
#    py_minversion: 3.6             # minimum Python version to use for this plugin
#    py_maxversion:                 # maximum Python version to use for this plugin (leave empty if latest)
    multi_instance: true            # plugin supports multi instance
    restartable: unknown
    classname: AVM                  # class containing the plugin

parameters:
    # Definition of parameters to be configured in etc/plugin.yaml
    username:
        type: str
        default: ''
        description:
            de: '(optional) Nutzername für den Login. Kann für manche Features benötigt werden! (Speziell für Fritz!OS 7 ist die Konfiguration der Fritz!Box auf `Anmeldung mit FRITZ!Box-Benutzernamen und Kennwort` notwendig'
            en: '(optional) Login information (user). Can be needed to use some features of the AVM device. (Specially for Firtz!OS 7 the Fritz!Box should be configured for login with username and password'
    password:
        type: str
        default: ''
        hide: true
        description:
            de: '(optional) Passwort für den Login. Wird in der Regel immer benötigt und aus Sicherheitsgründen empfohlen.'
            en: '(optional) Password for login. Is normally always needed and recommended due to security reasons'
    host:
        type: str
        default: 'fritz.box'
        description:
            de: '(optional) Hostname oder IP-Adresse des FritzDevice.'
            en: '(optional) Hostname or ip address of the FritzDevice.'
    port:
        type: int
        default: 49443
        description:
            de: '(optional) Port des FritzDevice, normalerweise 49443 für https oder 49000 für http'
            en: '(optional) Port of the FritzDevice, typically 49443 for https or 49000 for http'
    cycle:
        type: int
        default: 300
        description:
            de: '(optional) Zeit zwischen zwei Runs. Default ist 300 Sekunden.'
            en: '(optional) Time period between two update cycles. Default is 300 seconds.'
    ssl:
        type: bool
        default: true
        description:
            de: '(optional) Mit True wird das FritzDevice via https, mit False via http angesprochen.'
            en: '(optional) True will add "https", False "http" to the URLs in the plugin.'
    verify:
        type: bool
        default: false
        description:
            de: '(optional) Schaltet die Zertifikate-Prüfung an oder aus. Normalerweise False.'
            en: '(optional) Turns certificate verification on or off. Typically False'
    call_monitor:
        type: bool
        default: false
        description:
            de: '(optional) Aktiviert oder deaktiviert den MonitoringService, welcher auf den Call Monitor des FritzDevice verbindet. Der Call Monitor muss über ein verbundenes Telefon via #96*5* aktiviert sein.'
            en: '(optional) Activates or deactivates the MonitoringService, which connects to the FritzDevice`s call monitor. The call monitor has to be activated before by a connected telephone via calling #96*5*'
    call_monitor_incoming_filter:
        type: str
        default: ''
        description:
            de: '(optional) Filter, auf welche eigenen Rufnummern (oder Teile davon) der Callmonitor reagieren soll. Ist der Filter leer, werden alle eigenen Rufnummern überwacht. Wird ein Filterstring bspw. "12234" angegeben, werden nur die eigenen Anschlussnummern, die "12234" enthalten, vom CallMonitor verarbeitet.'
            en: '(optional) Filter, for which numbers (or part of the number) of own telephone connection the Callmonitor should react.'
    avm_home_automation:
        type: bool
        default: false
        description:
            de: '(optional) Aktiviert oder deaktiviert den Zugriff auf AVM Smarthome Geräte mit dem AHA HTTP Interface.'
            en: '(optional) Activates or deactivates access to AVM smarthome devices via AHA HTTP interface'
    log_entry_count:
        type: int
        default: 200
        description:
            de: '(optional) Anzahl der Log-Messages, die verarbeitet/bereitgestellt werden. 0 = alle'
            en: '(optional) Amount of Log-Messages, witch will be displayed. 0 = all'
    tr064_item_blacklist:
        type: bool
        default: False
        description:
            de: '(optional) Wenn aktiv, werden TR064 Items, deren Abfrageergebnis 2x zu einen Fehler geführt hat, blacklisted und anschließend nicht mehr abgefragt.'
            en: '(optional) If active, TR064 Items for which data polling resulted in errors, will be blacklisted and excluded from update cycle'

item_attributes:
    # Definition of item attributes defined by this plugin
    avm_data_type:
        type: str
        mandatory: True
        description:
            de: 'AVM Datentyp des jeweiligen Items.'
            en: 'AVM Data Type of the respective item.'
        valid_list:
        # Fritzdevice Attribute
          - 'uptime'                                  # r/o       num     Laufzeit des Fritzdevice in Sekunden
          - 'serial_number'                           # r/o       str     Serialnummer des Fritzdevice
          - 'software_version'                        # r/o       str     Software Version
          - 'hardware_version'                        # r/o       str     Hardware Version
        # Myfritz Attribute                                     
          - 'myfritz_status'                          # r/o       bool    MyFritz Status
        # Call Monitor Attribute                                
          - 'monitor_trigger'                         # r/o       bool      Monitortrigger
          - 'is_call_incoming'                        # r/o       bool      Eingehender Anruf erkannt
          - 'call_duration_incoming'                  # r/o       num       Dauer des eingehenden Anrufs
          - 'last_caller_incoming'                    # r/o       str       Letzter Anrufer
          - 'last_number_incoming'                    # r/o       str       Nummer des letzten eingehenden Anrufes
          - 'last_called_number_incoming'             # r/o       str       Angerufene Nummer des letzten eingehenden Anrufs
          - 'last_call_date_incoming'                 # r/o       str       Zeitpunkt des letzten eingehenden Anrufs
          - 'call_event_incoming'                     # r/o       str       Status des letzten eingehenden Anrufs
          - 'is_call_outgoing'                        # r/o       bool      Ausgehender Anruf erkannt
          - 'call_duration_outgoing'                  # r/o       num       Dauer des ausgehenden Anrufs
          - 'last_caller_outgoing'                    # r/o       str       Letzter angerufener Kontakt    
          - 'last_number_outgoing'                    # r/o       str       Letzte angerufene Nummer   
          - 'last_called_number_outgoing'             # r/o       str       Letzter verwendete Telefonnummer für ausgehenden Anruf
          - 'last_call_date_outgoing'                 # r/o       str       Zeitpunkt des letzten ausgehenden Anrufs
          - 'call_event_outgoing'                     # r/o       str       Status des letzten ausgehenden Anrufs
          - 'call_direction'                          # r/o       str       Richtung des letzten Anrufes
          - 'call_event'                              # r/o       str       Status des letzten Anrufes
        # TAM Attribute                      Hinweis: alle Attribute benötigen zusätzlich das Attribut 'avm_tam_index'
          - 'tam'                                     # r/w       bool      TAM an/aus
          - 'tam_name'                                # r/o       str       Name des TAM
          - 'tam_old_message_number'                  # r/o       num       Anzahl der alten Nachrichten
          - 'tam_new_message_number'                  # r/o       num       Anzahl der neuen Nachrichten
          - 'tam_total_message_number'                # r/o       num       Gesamtanzahl der Nachrichten
        # WAN Attribute                             
          - 'wan_connection_status'                   # r/o       str       WAN Verbindungsstatus
          - 'wan_connection_error'                    # r/o       str       WAN Verbindungsfehler
          - 'wan_is_connected'                        # r/o       bool      WAN Verbindung aktiv
          - 'wan_uptime'                              # r/o       str       WAN Verbindungszeit
          - 'wan_ip'                                  # r/o       str       WAN IP Adresse
          - 'wan_upstream'                            # r/o       num       WAN Upstream Datenmenge
          - 'wan_downstream'                          # r/o       num       WAN Downstream Datenmenge
          - 'wan_total_packets_sent'                  # r/o       num       WAN Verbindung-Anzahl insgesamt versendeter Pakete
          - 'wan_total_packets_received'              # r/o       num       WAN Verbindung-Anzahl insgesamt empfangener Pakete
          - 'wan_current_packets_sent'                # r/o       num       WAN Verbindung-Anzahl aktuell versendeter Pakete
          - 'wan_current_packets_received'            # r/o       num       WAN Verbindung-Anzahl aktuell empfangener Pakete
          - 'wan_total_bytes_sent'                    # r/o       num       WAN Verbindung-Anzahl insgesamt versendeter Bytes
          - 'wan_total_bytes_received'                # r/o       num       WAN Verbindung-Anzahl insgesamt empfangener Bytes
          - 'wan_current_bytes_sent'                  # r/o       num       WAN Verbindung-Anzahl aktuelle Bitrate Senden
          - 'wan_current_bytes_received'              # r/o       num       WAN Verbindung-Anzahl aktuelle Bitrate Empfangen
          - 'wan_link'                                # r/o       bool      WAN Link
        # WLAN Config Attribute              Hinweis: alle Attribute benötigen zusätzlich das Attribut 'avm_wlan_index'
          - 'wlanconfig'                              # r/w       bool      WLAN An/Aus
          - 'wlanconfig_ssid'                         # r/o       str       WLAN SSID
          - 'wlan_guest_time_remaining'               # r/o       num       Verbleibende Zeit, bis zum automatischen Abschalten des Gäste-WLAN
          - 'wlan_associates'                         # r/o       num       Anzahl der verbundenen Geräte im jeweiligen WLAN
          - 'wps_active'                              # r/w       bool      Schaltet WPS für das entsprechende WlAN an / aus
          - 'wps_status'                              # r/o       str       WPS Status des entsprechenden WlAN
          - 'wps_mode'                                # r/o       str       WPS Modus des entsprechenden WlAN
        # WLAN Attribute
          - 'wlan_total_associates'                   # r/o       num       Anzahl der verbundenen Geräte im WLAN
        # Host Attribute                     Hinweis: alle Attribute benötigen zusätzlich das Attribut 'avm_mac'           
          - 'network_device'                          # r/o       bool      Verbindungsstatus // Defines Network device via MAC-Adresse
          - 'device_ip'                               # r/o       str       Geräte-IP (Muss Child von 'network_device' sein)           
          - 'device_connection_type'                  # r/o       str       Verbindungstyp (Muss Child von 'network_device' sein)       
          - 'device_hostname'                         # r/o       str       Gerätename (Muss Child von 'network_device' sein)           
          - 'connection_status'                       # r/o       bool      Verbindungsstatus (Muss Child von 'network_device' sein)
        # Hosts Attribute
          - 'hosts_count'                             #r/o        num       Anzahl der Hosts
          - 'hosts_info'                              #r/o        dict      Informationen über die Hosts
          - 'mesh_topology'                           #r/o        dict      Topologie des Mesh
        # Smarthome Attribute (Deprecated avm data types. Please use alternative AHA interface type)
          - 'aha_device'                              # r/w       bool      Steckdose schalten; siehe "switch_state"
          - 'hkr_device'                              # r/o       str       Status des HKR (OPEN; CLOSED; TEMP)
          - 'set_temperature'                         # r/o       num       siehe "target_temperature"
          - 'temperature'                             # r/o       num       siehe "current_temperature"
          - 'set_temperature_reduced'                 # r/o       num       siehe "temperature_reduced"
          - 'set_temperature_comfort'                 # r/o       num       siehe "temperature_comfort"
          - 'firmware_version'                        # r/o       str       siehe "fw_version"
        # Deflections                        Hinweis: alle Attribute benötigen zusätzlich das Attribut 'avm_deflection_index'    
          - 'number_of_deflections'                   # r/o       num       Anzahl der eingestellten Rufumleitungen
          - 'deflection_details'                      # r/o       dict      Details zur Rufumleitung (als dict); Angabe der Rufumleitung mit Parameter "avm_deflection_index" im Item
          - 'deflections_details'                     # r/o       dict      Details zu allen Rufumleitung (als dict)
          - 'deflection_enable'                       # r/w       bool      Rufumleitung Status an/aus; Angabe der Rufumleitung mit Parameter "avm_deflection_index" im Item bzw Parent-Item
          - 'deflection_type'                         # r/o       str       Type der Rufumleitung; Angabe der Rufumleitung mit Parameter "avm_deflection_index" im Item bzw Parent-Item
          - 'deflection_number'                       # r/o       str       Telefonnummer, die umgeleitet wird; Angabe der Rufumleitung mit Parameter "avm_deflection_index" im Item bzw Parent-Item
          - 'deflection_to_number'                    # r/o       str       Zielrufnummer der Umleitung; Angabe der Rufumleitung mit Parameter "avm_deflection_index" im Item bzw Parent-Item
          - 'deflection_mode'                         # r/o       str       Modus der Rufumleitung; Angabe der Rufumleitung mit Parameter "avm_deflection_index" im Item bzw Parent-Item
          - 'deflection_outgoing'                     # r/o       str       Outgoing der Rufumleitung; Angabe der Rufumleitung mit Parameter "avm_deflection_index" im Item bzw Parent-Item
          - 'deflection_phonebook_id'                 # r/o       str       Phonebook_ID der Zielrufnummer (Only valid if Type==fromPB); Angabe der Rufumleitung mit Parameter "avm_deflection_index" im Item bzw Parent-Item
        # AHA Interface attributes           Hinweis: alle Attribute benötigen zusätzlich das Attribut 'avm_tam_ain'
          - 'device_id'                               # r/o       str       Geräte -ID                                    
          - 'manufacturer'                            # r/o       str       Hersteller                                    
          - 'product_name'                            # r/o       str       Produktname                                   
          - 'fw_version'                              # r/o       str       Firmware Version                              
          - 'connected'                               # r/o       bool      Verbindungsstatus                             
          - 'device_name'                             # r/o       str       Gerätename                                    
          - 'tx_busy'                                 # r/o       bool      Verbindung aktiv                              
          - 'device_functions'                        # r/o       list      Im Gerät vorhandene Funktionen                
                                                      
          - 'set_target_temperature'                  # w/o       num       Soll-Temperatur Setzen                          
          - 'target_temperature'                      # r/w       num       Soll-Temperatur (Status und Setzen)             
          - 'current_temperature'                     # r/o       num       Ist-Temperatur                                  
          - 'temperature_reduced'                     # r/o       num       Eingestellte reduzierte Temperatur              
          - 'temperature_comfort'                     # r/o       num       Eingestellte Komfort-Temperatur                 
          - 'temperature_offset'                      # r/o       num       Eingestellter Temperatur-Offset                 
          - 'set_window_open'                         # w/o       bool      "Window Open" Funktionen Setzen                 
          - 'window_open'                             # r/w       bool      "Window Open" Funktion (Status und Setzen)      
          - 'windowopenactiveendtime'                 # r/o       num       Zeitliches Ende der "Window Open" Funktion      
          - 'set_hkr_boost'                           # w/o       bool      "Boost" Funktion Setzen                         
          - 'hkr_boost'                               # r/w       bool      "Boost" Funktion (Status aund Setzen)           
          - 'boost_active'                            # r/o       bool      Status der "Boost" Funktion                     deprecated
          - 'boostactiveendtime'                      # r/o       num       Zeitliches Ende der "Boost" Funktion            
          - 'summer_active'                           # r/o       bool      Status der "Sommer" Funktion                    
          - 'holiday_active'                          # r/o       bool      Status der "Holiday" Funktion                   
          - 'battery_low'                             # r/o       bool      "Battery low" Status                            
          - 'battery_level'                           # r/o       num       Batterie-Status in %                            
          - 'lock'                                    # r/o       bool      Tastensperre über UI/API aktiv                  
          - 'device_lock'                             # r/o       bool      Tastensperre direkt am Gerät ein                
          - 'errorcode'                               # r/o       num       Fehlercodes die der HKR liefert                 
                                                      
          - 'set_simpleonoff'                         # w/o       bool      Gerät/Aktor/Lampe an-/ausschalten               
          - 'simpleonoff'                             # w/r       bool      Gerät/Aktor/Lampe (Status und Setzen)
                                                      
          - 'set_level'                               # w/o       num       Level/Niveau von 0 bis 255 Setzen               
          - 'level'                                   # w/r       num       Level/Niveau von 0 bis 255 (Setzen & Status)
          - 'set_levelpercentage'                     # w/o       num       Level/Niveau von 0% bis 100% Setzen             
          - 'levelpercentage'                         # w/r       num       Level/Niveau von 0% bis 100% (Setzen & Status)
          -
          - 'set_hue'                                 # w/o       num       Hue Setzen                                      
          - 'hue'                                     # w/r       num       Hue (Status und Setzen)
          - 'set_saturation'                          # w/o       num       Saturation Setzen                               
          - 'saturation'                              # w/r       num       Saturation (Status und Setzen)
          - 'set_colortemperature'                    # w/o       num       Farbtemperatur Setzen                           
          - 'colortemperature'                        # w/r       num       Farbtemperatur (Status und Setzen)
          - 'unmapped_hue'                            # w/r       num       Hue (Status und Setzen)
          - 'unmapped_saturation'                     # w/r       num       Saturation (Status und Setzen)
          - 'color_mode'                              # r/o       num       Aktueller Farbmodus (1-HueSaturation-Mode; 4-Farbtemperatur-Mode)
          - 'supported_color_mode'                    # r/o       num       Unterstützer Farbmodus (1-HueSaturation-Mode; 4-Farbtemperatur-Mode)
          - 'fullcolorsupport'                        # r/o       bool      Lampe unterstützt setunmappedcolor
          - 'mapped'                                  # r/o       bool      von den Colordefaults abweichend zugeordneter HueSaturation-Wert gesetzt

          - 'switch_state'                            # r/w       bool      Schaltzustand Steckdose (Status und Setzen)     
          - 'switch_mode'                             # r/o       str       Zeitschaltung oder manuell schalten
          - 'switch_toggle'                           # w/o       bool      Schaltzustand umschalten (toggle)               
                                                      
          - 'power'                                   # r/o       num       Leistung in W (Aktualisierung alle 2 min)       
          - 'energy'                                  # r/o       num       absoluter Verbrauch seit Inbetriebnahme in Wh
          - 'voltage'                                 # r/o       num       Spannung in V (Aktualisierung alle 2 min)       
                                                      
          - 'humidity'                                # r/o       num       Relative Luftfeuchtigkeit in % (FD440)

          - 'alert_state'                             # r/o       bool      letzter übermittelter Alarmzustand

          - 'blind_mode'                              # r/o       str       automatische Zeitschaltung oder manuell fahren
          - 'endpositionsset'                         # r/o       bool      ist die Endlage für das Rollo konfiguriert

    avm_incoming_allowed:
        type: str
        mandatory: False
        description:
            de: '(optional) Definition der erlaubten eingehenden Rufnummer in Items vom avm_data_type `monitor_trigger`.'
            en: '(optional) Definition of the allowed incoming number. Only in items of avm_data_type `monitor_trigger`.'

    avm_target_number:
        type: str
        mandatory: False
        description:
            de: '(optional) Definition der erlaubten angerufenen Rufnummer in Items vom avm_data_type `monitor_trigger`.'
            en: '(optional) Definition of the allowed called number. Only in items of avm_data_type `monitor_trigger`.'

    avm_wlan_index:
        type: int
        description:
            de: '(optional) Definition des Wlans ueber index: (1: 2.4Ghz, 2: 5Ghz, 3: Gaeste).'
            en: '(optional) Definition of WiFi via index: (1: 2.4GHz, 2: 5GHz, 3: Guest)'
        valid_min: 1
        valid_max: 3

    avm_mac:
        type: mac
        mandatory: False
        description:
            de: '(optional) Definition der MAC Adresse für Items vom avm_data_type `network_device`. Nur für diese Items mandatory!'
            en: '(optional) Definition of the MAC address for items of avm_data_type `network_device`. Only mandatory for these items!'

    avm_ain:
        type: str
        mandatory: False
        description:
            de: "(optional) Definition der AktorIdentifikationsNummer (AIN) Items vom avm_data_types für `AHA-Interface`. Nur für diese Items mandatory!"
            en: "(optional) Definition of the ActorIdentificationNumber (AIN) for items of avm_data_types `AHA-Interface`. Only mandatory for these items!"

    avm_tam_index:
        type: int
        mandatory: False
        description:
            de: '(optional) Index für den Anrufbeantworter, normalerweise für den ersten eine "1". Es werden bis zu 5 Anrufbeantworter vom Gerät unterstützt.'
            en: '(optional) Index für the answering machine, normally a "1" for the first one. Supported are up to 5 answering machines.'
        valid_min: 1
        valid_max: 5

    avm_deflection_index:
        type: int
        mandatory: False
        description:
            de: '(optional) Index für die Rufumleitung, normalerweise für die erste eine "1".'
            en: '(optional) Index deflection, normally a "1" for the first one.'
        valid_min: 1
        valid_max: 32

    avm_read_after_write:
        type: int
        description:
            de: '(optional) Konfiguriert eine Verzögerung in Sekunden nachdem ein Lesekommando nach einem Schreibkommando gesendet wird.'
            en: '(optional) Configures delay in seconds to issue a read command after write command'

    avm_data_cycle:
        type: int
        mandatory: False
        description:
            de: 'Poll-Zyklus des AVM Datentypes des jeweiligen Items. 0-Nur beim Initialisieren Lesen; 10+ - Zyklisch Lesen'
            en: 'Poll cycle of AVM Data Type of the respective item. 0-Just read at init; 10+ - cyclic reading'

item_structs:
    info:
        uptime:
            type: num
            visu_acl: ro
            avm_data_type@instance: uptime
            avm_data_cycle@instance: 600
        serial_number:
            type: str
            visu_acl: ro
            avm_data_type@instance: serial_number
            avm_data_cycle@instance: 0
        firmware:
            type: str
            visu_acl: ro
            avm_data_type@instance: software_version
            avm_data_cycle@instance: 3600
        hardware_version:
            type: str
            visu_acl: ro
            avm_data_type@instance: hardware_version
            avm_data_cycle@instance: 0
        myfritz:
            type: bool
            avm_data_type@instance: myfritz_status

    monitor:
        trigger:
            type: bool
            avm_data_type@instance: monitor_trigger
            avm_incoming_allowed@instance: xxxxxxxx
            avm_target_number@instance: xxxxxxxx
            enforce_updates: yes
        incoming:
            is_call_incoming:
                type: bool
                avm_data_type@instance: is_call_incoming
            duration:
                type: num
                avm_data_type@instance: call_duration_incoming
            last_caller:
                type: str
                avm_data_type@instance: last_caller_incoming
            last_calling_number:
                type: str
                avm_data_type@instance: last_number_incoming
            last_called_number:
                type: str
                avm_data_type@instance: last_called_number_incoming
            last_call_date:
                type: str
                avm_data_type@instance: last_call_date_incoming
            event:
                type: str
                avm_data_type@instance: call_event_incoming
        outgoing:
            is_call_outgoing:
                type: bool
                avm_data_type@instance: is_call_outgoing
            duration:
                type: num
                avm_data_type@instance: call_duration_outgoing
            last_caller:
                type: str
                avm_data_type@instance: last_caller_outgoing
            last_calling_number:
                type: str
                avm_data_type@instance: last_number_outgoing
            last_called_number:
                type: str
                avm_data_type@instance: last_called_number_outgoing
            last_call_date:
                type: str
                avm_data_type@instance: last_call_date_outgoing
            event:
                type: str
                avm_data_type@instance: call_event_outgoing
        newest:
            direction:
                type: str
                avm_data_type@instance: call_direction
                cache: yes
            event:
                type: str
                avm_data_type@instance: call_event
                cache: yes

    tam:
        type: bool
        visu_acl: rw
        avm_data_type@instance: tam
        avm_tam_index@instance: 1
        avm_read_after_write@instance: 5

        name:
            type: str
            visu_acl: ro
            avm_data_type@instance: tam_name
        message_number_old:
            type: num
            visu_acl: ro
            avm_data_type@instance: tam_old_message_number
        message_number_new:
            type: num
            visu_acl: ro
            avm_data_type@instance: tam_new_message_number
        message_number_total:
            type: num
            visu_acl: ro
            avm_data_type@instance: tam_total_message_number

    deflection:
        type: bool
        visu_acl: rw
        avm_data_type@instance: deflection_enable
        avm_deflection_index@instance: 1
        avm_read_after_write@instance: 5

        deflection_type:
            type: str
            visu_acl: ro
            avm_data_type@instance: deflection_type
        deflection_number:
            type: str
            visu_acl: ro
            avm_data_type@instance: deflection_number
        deflection_to_number:
            type: str
            visu_acl: ro
            avm_data_type@instance: deflection_to_number
        deflection_mode:
            type: str
            visu_acl: ro
            avm_data_type@instance: deflection_mode
        deflection_outgoing:
            type: str
            visu_acl: ro
            avm_data_type@instance: deflection_outgoing
        deflection_phonebook_id:
            type: num
            visu_acl: ro
            avm_data_type@instance: deflection_phonebook_id

    wan:
        connection_status:
            type: str
            visu_acl: ro
            avm_data_type@instance: wan_connection_status
        connection_error:
            type: str
            visu_acl: ro
            avm_data_type@instance: wan_connection_error
        is_connected:
            type: bool
            visu_acl: ro
            avm_data_type@instance: wan_is_connected
        uptime:
            type: num
            visu_acl: ro
            avm_data_type@instance: wan_uptime
        upstream:
            type: num
            visu_acl: ro
            avm_data_type@instance: wan_upstream
        downstream:
            type: num
            visu_acl: ro
            avm_data_type@instance: wan_downstream
        total_packets_sent:
            type: num
            visu_acl: ro
            avm_data_type@instance: wan_total_packets_sent
        total_packets_received:
            type: num
            visu_acl: ro
            avm_data_type@instance: wan_total_packets_received
        total_bytes_sent:
            type: num
            visu_acl: ro
            avm_data_type@instance: wan_total_bytes_sent
        total_bytes_received:
            type: num
            visu_acl: ro
            avm_data_type@instance: wan_total_bytes_received
        current_bytes_sent:
          type: num
          visu_acl: ro
          avm_data_type@instance: wan_current_bytes_sent
        current_bytes_receive:
          type: num
          visu_acl: ro
          avm_data_type@instance: wan_current_bytes_received
        link:
            type: bool
            visu_acl: ro
            avm_data_type@instance: wan_link
        reconnect:
            type: bool
            visu_acl: rw
            enforce_updates: yes

    wlan:
        wlan_1:
            type: bool
            visu_acl: rw
            avm_data_type@instance: wlanconfig    # 2,4ghz
            avm_wlan_index@instance: 1
            avm_read_after_write@instance: 5
        wlan_1_ssid:
            type: str
            visu_acl: ro
            avm_data_type@instance: wlanconfig_ssid
            avm_wlan_index@instance: 1
        wlan_1_associates:
          type: num
          visu_acl: ro
          avm_data_type@instance: wlan_associates
          avm_wlan_index@instance: 1
        wlan_2:
            type: bool
            visu_acl: rw
            avm_data_type@instance: wlanconfig    # 5 GHz
            avm_wlan_index@instance: 2
            avm_read_after_write@instance: 5
        wlan_2_ssid:
            type: str
            visu_acl: ro
            avm_data_type@instance: wlanconfig_ssid
            avm_wlan_index@instance: 2
        wlan_2_associates:
          type: num
          visu_acl: ro
          avm_data_type@instance: wlan_associates
          avm_wlan_index@instance: 2
        wlan_gast:
            type: bool
            visu_acl: rw
            avm_data_type@instance: wlanconfig    # Guest
            avm_wlan_index@instance: 3
            avm_read_after_write@instance: 5
        wlan_gast_ssid:
            type: str
            visu_acl: ro
            avm_data_type@instance: wlanconfig_ssid
            avm_wlan_index@instance: 3
        wlan_gast_associates:
          type: num
          visu_acl: ro
          avm_data_type@instance: wlan_associates
          avm_wlan_index@instance: 3
        wlan_gast_tr:
            type: num
            visu_acl: rw
            avm_data_type@instance: wlan_guest_time_remaining
            avm_wlan_index@instance: 3

    device:
        avm_data_type@instance: network_device
        type: bool
        visu_acl: ro
        ip:
            type: str
            avm_data_type@instance: device_ip
            visu_acl: ro
        connection_type:
            type: str
            avm_data_type@instance: device_connection_type
            visu_acl: ro
        hostname:
            type: str
            avm_data_type@instance: device_hostname
            visu_acl: ro

    aha_general:
        name:
            type: str
            avm_data_type@instance: device_name
            avm_data_cycle@instance: 0
        identifier:
            type: str
            avm_data_type@instance: device_id
            avm_data_cycle@instance: 0
        productname:
            type: str
            avm_data_type@instance: product_name
            avm_data_cycle@instance: 0
        manufacturer:
            type: str
            avm_data_type@instance: manufacturer
            avm_data_cycle@instance: 0
        firmware_version:
            type: str
            avm_data_type@instance: fw_version
            avm_data_cycle@instance: 0
        present:
            type: bool
            avm_data_type@instance: connected
            avm_data_cycle@instance: 0
        functions:
            type: list
            avm_data_type@instance: device_functions
            avm_data_cycle@instance: 0

    aha_thermostat:
        target_temperature:
            avm_data_type@instance: target_temperature
            avm_read_after_write@instance: 5
            type: num
        comfort_temperature:
            avm_data_type@instance: temperature_comfort
            type: num
        eco_temperature:
            avm_data_type@instance: temperature_reduced
            type: num
        battery_low:
            avm_data_type@instance: battery_low
            type: bool
        battery_level:
            avm_data_type@instance: battery_level
            type: num
        window_open:
            avm_data_type@instance: window_open
            type: bool
        windowopenactiveendtime:
            avm_data_type@instance: windowopenactiveendtime
            type: num
        summer_active:
            avm_data_type@instance: summer_active
            type: bool
        holiday_active:
            avm_data_type@instance: holiday_active
            type: bool
        errorcode:
            avm_data_type@instance: errorcode
            type: num
        hkr_boost:
            avm_data_type@instance: hkr_boost
            type: bool
        boostactiveendtime:
            avm_data_type@instance: boostactiveendtime
            type: num
        lock:
            avm_data_type@instance: lock
            type: bool
        device_lock:
            avm_data_type@instance: device_lock
            type: bool

    aha_temperature_sensor:
        current_temperature:
            avm_data_type@instance: current_temperature
            type: num
        temperature_offset:
            avm_data_type@instance: temperature_offset
            type: num

    aha_humidity_sensor:
      humidity:
        avm_data_type@instance: humidity
        type: num

    aha_alert:
        state:
            avm_data_type@instance: alert
            type: bool

    aha_switch:
        switch_state:
            avm_data_type@instance: switch_state
            type: bool
        switch_mode:
          avm_data_type@instance: switch_mode
          type: str
        switch_toggle:
            avm_data_type@instance: switch_toggle
            type: bool
            enforce_updates: yes

    aha_powermeter:
        power:
            avm_data_type@instance: power
            type: num
        energy:
            avm_data_type@instance: energy
            type: num
        voltage:
            avm_data_type@instance: voltage
            type: num

    aha_level:
        level:
            avm_data_type@instance: level
            type: num
        level_percentage:
            avm_data_type@instance: levelpercentage
            type: num

    aha_blind:
      blind_mode:
        avm_data_type@instance: blind_mode
        type: str
      endpositionsset:
        avm_data_type@instance: endpositionsset
        type: bool

    aha_on_off:
        on_off:
            avm_data_type@instance: simpleonoff
            type: bool

    aha_button:
        battery_low:
            avm_data_type@instance: battery_low
            type: bool
        battery_level:
            avm_data_type@instance: battery_level
            type: num

    aha_color:
      color_mode:
        avm_data_type@instance: color_mode
        type: num
      supported_color_mode:
        avm_data_type@instance: supported_color_mode
        type: num
      fullcolorsupport:
        avm_data_type@instance: fullcolorsupport
        type: bool
      mapped:
        avm_data_type@instance: mapped
        type: bool
      hue:
        avm_data_type@instance: hue
        type: num
      saturation:
        avm_data_type@instance: saturation
        type: num
      unmapped_hue:
        avm_data_type@instance: unmapped_hue
        type: bool
      unmapped_saturation:
        avm_data_type@instance: unmapped_saturation
        type: bool
      colortemperature:
        avm_data_type@instance: colortemperature
        type: num

#item_attribute_prefixes:
    # Definition of item attributes that only have a common prefix (enter 'item_attribute_prefixes: NONE' or ommit this section, if section should be empty)
    # NOTE: This section should only be used, if really necessary (e.g. for the stateengine plugin)

plugin_functions:

    cancel_call:
        type: void
        description:
            de: "Beendet einen aktiven Anruf."
            en: "Cancels an active call."
        parameters:
        # This function has no parameters

    get_call_origin:
        type: str
        description:
            de: "Gib den Namen des Telefons zurück, das aktuell als 'call origin' gesetzt ist."
            en: "Gets the phone name, currently set as 'call origin'."
        parameters:
        # This function has no parameters

    get_calllist:
        type: list(dict(str))
        description:
            de: "Ermittelt ein Array mit dicts aller Einträge der Anrufliste (Attribute 'Id', 'Type', 'Caller', 'Called', 'CalledNumber', 'Name', 'Numbertype', 'Device', 'Port', 'Date',' Duration' (einige optional))."
            en: "Returns an array of dicts with all calllist entries (attributes 'Id', 'Type', 'Caller', 'Called', 'CalledNumber', 'Name', 'Numbertype', 'Device', 'Port', 'Date', 'Duration' (some optional))."
        parameters:
            filter_incoming:
                type: str
                default: ''
                description:
                    de: "Filter, um nur die Anrufe zu erhalten, die zu einer bestimmten angerufenen Nummer gehören."
                    en: "Filter to filter calls to a specific destination phone number."
            phonebook_id:
                type: int
                default: 0
                description:
                    de: "ID des Telefonbuchs, in dem nachgeschlagen werden soll."
                    en: "ID of the phone book, in which numbers should be looked up."

    get_contact_name_by_phone_number:
        type: str
        description:
            de: "Durchsucht das Telefonbuch mit einer (vollständigen) Telefonnummer nach Kontakten. Falls kein Name gefunden wird, wird die Telefonnummer zurückgeliefert."
            en: "Searches the phonebook for a contact by a given (complete) phone number. In case no name is found, the phone number is returned."
        parameters:
            phone_number:
                type: str
                description:
                    de: "Vollständige Telefonnummer"
                    en: "Complete phone number"
            phonebook_id:
                type: int
                default: 0
                description:
                    de: "ID des Telefonbuchs, in dem nachgeschlagen werden soll."
                    en: "ID of the phone book, in which numbers should be looked up."

    get_device_log_from_lua:
        type: list(list(str))
        description:
            de: "Ermittelt die Logeinträge auf dem Gerät über die LUA Schnittstelle /query.lua?mq_log=logger:status/log."
            en: "Gets the log entries on the device via the LUA interface /query.lua?mq_log=logger:status/log."
        parameters:
        # This function has no parameters

    get_device_log_from_tr064:
        type: list(str)
        description:
            de: "Ermittelt die Logeinträge auf dem Gerät über die TR-064 Schnittstelle."
            en: "Gets the log entries on the device via the TR-064 interface."
        parameters:
        # This function has no parameters

    get_host_details:
        type: dict(str)
        description:
            de: "Ermittelt die Informationen zu einem Host an einem angegebenen Index."
            en: "Gets the information of a hosts at a specific index."
        parameters:
            index:
                type: int
                description:
                    de: "Index"
                    en: "Index"

    get_hosts:
        type: list(dict(str))
        description:
            de: "Ermittelt ein Array mit den Namen aller verbundener Hosts."
            en: "Gets the name of all connected hosts as an array."
        parameters:
            only_active:
                type: bool
                description:
                    de: "True, wenn nur aktuell aktive Hosts zurückgegeben werden sollen."
                    en: "True, if only active hosts shall be returned."

    get_phone_name:
        type: str
        description:
            de: "Gibt den Namen eines Telefons an einem Index zurück. Der zurückgegebene Wert kann in 'set_call_origin' verwendet werden."
            en: "Get the phone name at a specific index. The returend value can be used as phone_name for set_call_origin."
        parameters:
            index:
                type: int
                description:
                    de: "Index"
                    en: "Index"

    get_phone_numbers_by_name:
        type: dict(dict(str))
        description:
            de: "Durchsucht das Telefonbuch mit einem Namen nach nach Kontakten und liefert die zugehörigen Telefonnummern."
            en: "Searches the phonebook for a contact by a given name and returns the corresponding phone numbers."
        parameters:
            name:
                type: str
                description:
                    de: "Anteiliger oder vollständiger Name des Kontakts."
                    en: "Partial or full name of the contact."
            phonebook_id:
                type: int
                default: 0
                description:
                    de: "ID des Telefonbuchs, in dem nachgeschlagen werden soll."
                    en: "ID of the phone book, in which numbers should be looked up."

    is_host_active:
        type: bool
        description:
            de: "Prüft, ob eine MAC Adresse auf dem Gerät aktiv ist. Das kann bspw. für die Umsetzung einer Präsenzerkennung genutzt werden."
            en: "Checks if a MAC address is active on the FritzDevice, e.g. the status can be used for simple presence detection."
        parameters:
            mac_address:
                type: mac
                description:
                    de: "MAC Adresse"
                    en: "MAC address"

    reboot:
        type: void
        description:
            de: "Startet das Gerät neu."
            en: "Reboots the device."

    reconnect:
        type: void
        description:
            de: "Verbindet das Gerät neu mit dem WAN (Wide Area Network)."
            en: "Reconnects the device to the WAN (Wide Area Network)."

    set_call_origin:
        type: void
        description:
            de: "Setzt den 'call origin', bspw. vor dem Aufruf von 'start_call'."
            en: "Sets the 'call origin', e.g. before running 'start_call'."
        parameters:
            phone_name:
                type: mac
                description:
                    de: "Identifikator des Telefons, dass als 'call origin' gesetzt werden soll. bspw. zwei Sterne gefolgt von '610' für ein internes Gerät."
                    en: "Full phone identifier, could be e.g. two asterisk followed by '610' for an internal device."

    start_call:
        type: void
        description:
            de: "Startet einen Anruf an eine übergebene Telefonnummer (intern oder extern)."
            en: "Starts a call for a given phone number (internal or external)."
        parameters:
            phone_number:
                type: str
                description:
                    de: "Vollständige Telefonnummer, die angerufen werden soll."
                    en: "Full phone number to call"

    wol:
        type: void
        description:
            de: "Sendet einen WOL (WakeOnLAN) Befehl an eine MAC Adresse."
            en: "Sends a WOL (WakeOnLAN) command to a MAC address."
        parameters:
            mac_address:
                type: mac
                description:
                    de: "MAC Adresse"
                    en: "MAC address"

    get_number_of_deflections:
        type: bool
        description:
            de: "Liefert die Anzahl der Rufumleitungen zurück."
            en: "Returns Number of set deflections."
        parameters:
        # This function has no parameters

    get_deflection:
        type: bool
        description:
            de: "Liefert die Details der Rufumleitung der angegebenen ID zurück (Default-ID = 0)"
            en: "Returns details of deflection with given deflection_id (default id = 0)"
        parameters:
            deflection_id:
                type: int
                description:
                    de: "Identifikator der abzufragenden Rufumleitung."
                    en: "Identifier of deflection."

    get_deflections:
        type: bool
        description:
            de: "Liefert die Details aller Rufumleitungen zurück."
            en: "Returns details of all deflections."
        parameters:
        # This function has no parameters

    set_deflection_enable:
        type: bool
        description:
            de: "Schaltet die Rufumleitung mit angegebener ID an oder aus."
            en: "Enables or disables deflection with given ID."
        parameters:
            deflection_id:
                type: int
                description:
                    de: "Identifikator der abzufragenden Rufumleitung."
                    en: "identifier of deflection."
            enable:
                type: bool
                description:
                    de: "An / Aus"
                    en: "Enable / Disable"

    get_mesh_topology:
      type: dict
      description:
        de: "Liefert die Mesh-Topologie als Dictionary"
        en: "Lists mesh topology as dict"
      parameters:
      # This function has no parameters

    get_hosts_dict:
      type: dict
      description:
        de: "Liefert Informationen aller Hosts als Dictionary"
        en: "Lists information of all hosts as dict"
      parameters:
      # This function has no parameters

logic_parameters: NONE
    # Definition of logic parameters defined by this plugin (enter 'logic_parameters: NONE', if section should be empty)
