<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>multidevice.MD_Globals API documentation</title>
<meta name="description" content="Global definitions of constants and functions for MultiDevice" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>multidevice.MD_Globals</code></h1>
</header>
<section id="section-intro">
<p>Global definitions of constants and functions for MultiDevice</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#!/usr/bin/env python3
# vim: set encoding=utf-8 tabstop=4 softtabstop=4 shiftwidth=4 expandtab
#########################################################################
#  Copyright 2020-      Sebastian Helms             Morg @ knx-user-forum
#########################################################################
#  This file aims to become part of SmartHomeNG.
#  https://www.smarthomeNG.de
#  https://knx-user-forum.de/forum/supportforen/smarthome-py
#
#  Globals for MultiDevice plugin
#
#  SmartHomeNG is free software: you can redistribute it and/or modify
#  it under the terms of the GNU General Public License as published by
#  the Free Software Foundation, either version 3 of the License, or
#  (at your option) any later version.
#
#  SmartHomeNG is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#  GNU General Public License for more details.
#
#  You should have received a copy of the GNU General Public License
#  along with SmartHomeNG. If not, see &lt;http://www.gnu.org/licenses/&gt;.
#
#########################################################################

&#34;&#34;&#34; Global definitions of constants and functions for MultiDevice &#34;&#34;&#34;

from lib.utils import Utils
from ast import literal_eval
from collections import abc
import types

#############################################################################################################################################################################################################################################
#
# global constants used to configure plugin, device, connection and items
#
# do not change if not absolutely sure about the consequences!
#
#############################################################################################################################################################################################################################################

# plugin attributes, used in plugin config &#39;device&#39; and instance creation (**kwargs)

# general attributes
PLUGIN_ATTR_ENABLED          = &#39;enabled&#39;                 # set to False to manually disable loading of device
PLUGIN_ATTR_MODEL            = &#39;model&#39;                   # select model if applicable. Don&#39;t set if not necessary!
PLUGIN_ATTR_CLEAN_STRUCTS    = &#39;clean_structs&#39;           # remove items from stucts not supported by chosen model (not necessary if using generated structs)
PLUGIN_ATTR_CMD_CLASS        = &#39;command_class&#39;           # name of class to use for commands
PLUGIN_ATTR_RECURSIVE        = &#39;recursive_custom&#39;        # indices of custom item attributes for which to enable recursive lookup (number or list of numbers)

# general connection attributes
PLUGIN_ATTR_CONNECTION       = &#39;conn_type&#39;               # manually set connection class, classname or type (see below)
PLUGIN_ATTR_CONN_TIMEOUT     = &#39;timeout&#39;                 # timeout for reading from network or serial
PLUGIN_ATTR_CONN_TERMINATOR  = &#39;terminator&#39;              # terminator for reading from network or serial
PLUGIN_ATTR_CONN_BINARY      = &#39;binary&#39;                  # tell connection to handle data for binary parsing
PLUGIN_ATTR_CONN_AUTO_CONN   = &#39;autoreconnect&#39;           # (re)connect automatically on send
PLUGIN_ATTR_CONN_RETRIES     = &#39;connect_retries&#39;         # if autoreconnect: how often to reconnect
PLUGIN_ATTR_CONN_CYCLE       = &#39;connect_cycle&#39;           # if autoreconnect: how many seconds to wait between retries

# network attributes
PLUGIN_ATTR_NET_HOST         = &#39;host&#39;                    # hostname / IP for network connection
PLUGIN_ATTR_NET_PORT         = &#39;port&#39;                    # port for network connection

# serial attributes
PLUGIN_ATTR_SERIAL_PORT      = &#39;serialport&#39;              # serial port for serial connection
PLUGIN_ATTR_SERIAL_BAUD      = &#39;baudrate&#39;                # baudrate for serial connection
PLUGIN_ATTR_SERIAL_BSIZE     = &#39;bytesize&#39;                # bytesize for serial connection
PLUGIN_ATTR_SERIAL_PARITY    = &#39;parity&#39;                  # parity for serial connection
PLUGIN_ATTR_SERIAL_STOP      = &#39;stopbits&#39;                # stopbits for serial connection

# protocol attributes
PLUGIN_ATTR_PROTOCOL         = &#39;protocol&#39;                # manually choose protocol class, classname or type (see below). Don&#39;t set if not necessary!
PLUGIN_ATTR_MSG_TIMEOUT      = &#39;message_timeout&#39;         # how many seconds to wait for reply to command (JSON-RPC only)
PLUGIN_ATTR_MSG_REPEAT       = &#39;message_repeat&#39;          # how often to repeat command till reply is received? (JSON-RPC only)

# callback functions, not in plugin.yaml
PLUGIN_ATTR_CB_ON_CONNECT    = &#39;connected_callback&#39;      # callback function, called if connection is established
PLUGIN_ATTR_CB_ON_DISCONNECT = &#39;disconnected_callback&#39;   # callback function, called if connection is lost

PLUGIN_ATTRS = (PLUGIN_ATTR_ENABLED, PLUGIN_ATTR_MODEL, PLUGIN_ATTR_CLEAN_STRUCTS, PLUGIN_ATTR_CMD_CLASS, PLUGIN_ATTR_RECURSIVE,
                PLUGIN_ATTR_CONNECTION, PLUGIN_ATTR_CB_ON_CONNECT, PLUGIN_ATTR_CB_ON_DISCONNECT, PLUGIN_ATTR_CONN_TIMEOUT,
                PLUGIN_ATTR_CONN_TERMINATOR, PLUGIN_ATTR_CONN_AUTO_CONN, PLUGIN_ATTR_CONN_RETRIES, PLUGIN_ATTR_CONN_CYCLE,
                PLUGIN_ATTR_CONN_BINARY, PLUGIN_ATTR_NET_HOST, PLUGIN_ATTR_NET_PORT,
                PLUGIN_ATTR_SERIAL_PORT, PLUGIN_ATTR_SERIAL_BAUD, PLUGIN_ATTR_SERIAL_BSIZE, PLUGIN_ATTR_SERIAL_PARITY, PLUGIN_ATTR_SERIAL_STOP,
                PLUGIN_ATTR_PROTOCOL, PLUGIN_ATTR_MSG_TIMEOUT, PLUGIN_ATTR_MSG_REPEAT)

# connection types for PLUGIN_ATTR_CONNECTION
CONN_NULL                    = &#39;&#39;                 # use base connection class without real connection functionality, for testing
CONN_NET_TCP_REQ             = &#39;net_tcp_request&#39;  # TCP client connection with URL-based requests
CONN_NET_TCP_CLI             = &#39;net_tcp_client&#39;   # persistent TCP client connection with async callback for responses
CONN_NET_TCP_JSONRPC         = &#39;net_tcp_jsonrpc&#39;  # JSON RPC via persistent TCP client connection with async callback for responses
CONN_NET_UDP_SRV             = &#39;net_udp_server&#39;   # UDP server connection with async data callback
CONN_SER_DIR                 = &#39;serial&#39;           # serial connection with query-reply logic
CONN_SER_ASYNC               = &#39;serial_async&#39;     # serial connection with only async data callback

CONNECTION_TYPES = (CONN_NULL, CONN_NET_TCP_REQ, CONN_NET_TCP_CLI, CONN_NET_TCP_JSONRPC, CONN_NET_UDP_SRV, CONN_SER_DIR, CONN_SER_ASYNC)

# protocol types for PLUGIN_ATTR_PROTOCOL
PROTO_NULL                   = &#39;&#39;                 # use base protocol class without added functionality (why??)
PROTO_JSONRPC                = &#39;jsonrpc&#39;          # JSON-RPC 2.0 support with send queue, msgid and resend of unanswered commands
PROTO_VIESSMANN              = &#39;viessmann&#39;        # Viessmann P300 / KW

PROTOCOL_TYPES = (PROTO_NULL, PROTO_JSONRPC, PROTO_VIESSMANN)

# item attributes (as defines in plugin.yaml)
ITEM_ATTR_DEVICE             = &#39;md_device&#39;              # device id of the related device
ITEM_ATTR_COMMAND            = &#39;md_command&#39;             # command to issue/read for the item
ITEM_ATTR_READ               = &#39;md_read&#39;                # command can be triggered for reading
ITEM_ATTR_CYCLE              = &#39;md_read_cycle&#39;          # trigger read every x seconds
ITEM_ATTR_READ_INIT          = &#39;md_read_initial&#39;        # trigger read on initial connect
ITEM_ATTR_GROUP              = &#39;md_read_group&#39;          # trigger read with read group &lt;foo&gt;
ITEM_ATTR_WRITE              = &#39;md_write&#39;               # command can be called for writing values
ITEM_ATTR_READ_GRP           = &#39;md_read_group_trigger&#39;  # item triggers reading of read group &lt;foo&gt;
ITEM_ATTR_LOOKUP             = &#39;md_lookup&#39;              # create lookup item &lt;item&gt;.lookup
ITEM_ATTR_CUSTOM_PREFIX      = &#39;md_custom&#39;              # prefix for custom attributes (used internally)
ITEM_ATTR_CUSTOM1            = &#39;md_custom1&#39;             # custom attribute 1
ITEM_ATTR_CUSTOM2            = &#39;md_custom2&#39;             # custom attribute 2
ITEM_ATTR_CUSTOM3            = &#39;md_custom3&#39;             # custom attribute 3

ITEM_ATTRS = (ITEM_ATTR_DEVICE, ITEM_ATTR_COMMAND, ITEM_ATTR_READ, ITEM_ATTR_CYCLE, ITEM_ATTR_READ_INIT, ITEM_ATTR_WRITE, ITEM_ATTR_READ_GRP, ITEM_ATTR_GROUP, ITEM_ATTR_LOOKUP, ITEM_ATTR_CUSTOM1, ITEM_ATTR_CUSTOM2, ITEM_ATTR_CUSTOM3)

# command definition
COMMAND_READ                 = True                     # used internally
COMMAND_WRITE                = False                    # used internally
COMMAND_SEP                  = &#39;.&#39;                      # divider for command path items
CUSTOM_SEP                   = &#39;#&#39;                      # divider for command and custom token

# command definition attributes
CMD_ATTR_OPCODE              = &#39;opcode&#39;                 # code or string to send to device
CMD_ATTR_READ                = &#39;read&#39;                   # command can request/receive value
CMD_ATTR_WRITE               = &#39;write&#39;                  # command can set value
CMD_ATTR_ITEM_TYPE           = &#39;item_type&#39;              # type of associated shng item
CMD_ATTR_DEV_TYPE            = &#39;dev_datatype&#39;           # type of DT class for device
CMD_ATTR_READ_CMD            = &#39;read_cmd&#39;               # code or string to send for reading (if different from opcode)
CMD_ATTR_WRITE_CMD           = &#39;write_cmd&#39;              # code or string to send for writing (if different from opcode)
CMD_ATTR_REPLY_PATTERN       = &#39;reply_pattern&#39;          # regex pattern(s) to identify reply and capture reply value
CMD_ATTR_CMD_SETTINGS        = &#39;cmd_settings&#39;           # additional settings for command, e.g. data validity
CMD_ATTR_LOOKUP              = &#39;lookup&#39;                 # use lookup table &lt;foo&gt; to translate between plugin and items
CMD_ATTR_PARAMS              = &#39;params&#39;                 # parameters to send (e.g. in JSON-RPC)
CMD_ATTR_ITEM_ATTRS          = &#39;item_attrs&#39;             # item attributes for struct generation (see below)

CMD_IATTR_RG_LEVELS          = &#39;read_group_levels&#39;      # include this number of read groups (max, 0=no read groups)
CMD_IATTR_LOOKUP_ITEM        = &#39;lookup_item&#39;            # create lookup item &lt;item&gt;.lookup
CMD_IATTR_ATTRIBUTES         = &#39;attributes&#39;             # additional item attributes (copy 1:1)
CMD_IATTR_READ_GROUPS        = &#39;read_groups&#39;            # add custom read group(s) and read group trigger(s)
CMD_IATTR_ENFORCE            = &#39;enforce&#39;                # add ``enforce_updates: true``
CMD_IATTR_INITIAL            = &#39;initial&#39;                # add ``md_read_initial: true``
CMD_IATTR_CYCLE              = &#39;cycle&#39;                  # add ``md_read_cycle: &lt;val&gt;``
CMD_IATTR_TEMPLATE           = &#39;item_template&#39;          # add item template &lt;foo&gt;

# commands definition parameters
COMMAND_PARAMS = (CMD_ATTR_OPCODE, CMD_ATTR_READ, CMD_ATTR_WRITE, CMD_ATTR_ITEM_TYPE, CMD_ATTR_DEV_TYPE,
                  CMD_ATTR_READ_CMD, CMD_ATTR_WRITE_CMD, CMD_ATTR_REPLY_PATTERN, CMD_ATTR_CMD_SETTINGS,
                  CMD_ATTR_LOOKUP, CMD_ATTR_PARAMS, CMD_ATTR_ITEM_ATTRS)

COMMAND_ITEM_ATTRS = (CMD_IATTR_RG_LEVELS, CMD_IATTR_LOOKUP_ITEM, CMD_IATTR_ATTRIBUTES, CMD_IATTR_TEMPLATE,
                      CMD_IATTR_READ_GROUPS, CMD_IATTR_CYCLE, CMD_IATTR_INITIAL, CMD_IATTR_ENFORCE)

# reply pattern substitution tokens, set token in {&lt;token&gt;}
PATTERN_LOOKUP               = &#39;LOOKUP&#39;                 # replace with lookup values    
PATTERN_VALID_LIST           = &#39;VALID_LIST&#39;             # replace with valid_list items
PATTERN_VALID_LIST_CI        = &#39;VALID_LIST_CI&#39;          # replace with valid_list_ci items
PATTERN_CUSTOM_PATTERN       = &#39;CUSTOM_PATTERN&#39;         # replace with custom pattern &lt;x&gt;

PATTERN_MARKERS = (PATTERN_LOOKUP, PATTERN_VALID_LIST, PATTERN_VALID_LIST_CI, PATTERN_CUSTOM_PATTERN)

# command string substitution tokens, set token in {&lt;token&gt;}
CMD_STR_VAL_RAW              = &#39;RAW_VALUE&#39;              # replace with raw value
CMD_STR_VAL_UPP              = &#39;RAW_VALUE_UPPER&#39;        # replace with raw value uppercase (if string)
CMD_STR_VAL_LOW              = &#39;RAW_VALUE_LOWER&#39;        # replace with raw value lowercase (if string)
CMD_STR_VAL_CAP              = &#39;RAW_VALUE_CAP&#39;          # replace with raw value capitalized (if string)
CMD_STR_VALUE                = &#39;VALUE&#39;                  # replace with DT converted value
CMD_STR_OPCODE               = &#39;OPCODE&#39;                 # replace with opcode string/bytes
CMD_STR_PARAM                = &#39;PARAM:&#39;                 # replace with kwargs[foo] (``{PARAM:foo}``)
CMD_STR_CUSTOM               = &#39;CUSTOM_ATTR&#39;            # replace with value of custom attribute &lt;x&gt;

CMD_STRINGS = (CMD_STR_VAL_RAW, CMD_STR_VAL_UPP, CMD_STR_VAL_LOW, CMD_STR_VAL_CAP, CMD_STR_VALUE, CMD_STR_OPCODE, CMD_STR_PARAM, CMD_STR_CUSTOM)

# JSON keys to move from dict root to data.params
JSON_MOVE_KEYS               = &#39;json_move_keys&#39;

# keys for min / max values for data bounds
MINMAXKEYS                   = (&#39;valid_min&#39;, &#39;valid_max&#39;, &#39;force_min&#39;, &#39;force_max&#39;)

# name of non-model specific key for commands, models and lookups
INDEX_GENERIC                = &#39;ALL&#39;                    # placeholder for generic data
INDEX_MODEL                  = &#39;MODEL&#39;                  # placeholder for model-specific struct

# dict keys for request data_dict
REQUEST_DICT_ARGS = (&#39;params&#39;, &#39;headers&#39;, &#39;data&#39;, &#39;cookies&#39;, &#39;files&#39;)


#############################################################################################################################################################################################################################################
#
# Exceptions
#
#############################################################################################################################################################################################################################################

class CommandsError(Exception):
    pass


#############################################################################################################################################################################################################################################
#
# non-class functions
#
#############################################################################################################################################################################################################################################

def sanitize_param(val):
    &#34;&#34;&#34;
    Try to correct type of val if val is string:
    - return int(val) if val is integer
    - return float(val) if val is float
    - return bool(val) is val follows conventions for bool
    - try if string can be converted to list, tuple or dict; do so if possible
    - return val unchanged otherwise

    :param val: value to sanitize
    :return: sanitized (or unchanged) value
    &#34;&#34;&#34;
    if isinstance(val, (int, float, bool)) or isinstance(val, type) or type(val) == types.FunctionType:
        return val
    if Utils.is_int(str(val)):
        val = int(val)
    elif Utils.is_float(str(val)):
        val = float(val)
    elif isinstance(val, str) and val.lower() in (&#39;true&#39;, &#39;false&#39;, &#39;on&#39;, &#39;off&#39;, &#39;yes&#39;, &#39;no&#39;):
        val = Utils.to_bool(val)
    else:
        try:
            new = literal_eval(val)
            if type(new) in (list, dict, tuple):
                val = new
        except Exception:
            pass
    return val


def update(d, u):
    for k, v in u.items():
        if isinstance(v, abc.Mapping):
            d[k] = update(d.get(k, {}), v)
        else:
            d[k] = v
    return d</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="multidevice.MD_Globals.sanitize_param"><code class="name flex">
<span>def <span class="ident">sanitize_param</span></span>(<span>val)</span>
</code></dt>
<dd>
<div class="desc"><p>Try to correct type of val if val is string:
- return int(val) if val is integer
- return float(val) if val is float
- return bool(val) is val follows conventions for bool
- try if string can be converted to list, tuple or dict; do so if possible
- return val unchanged otherwise</p>
<p>:param val: value to sanitize
:return: sanitized (or unchanged) value</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def sanitize_param(val):
    &#34;&#34;&#34;
    Try to correct type of val if val is string:
    - return int(val) if val is integer
    - return float(val) if val is float
    - return bool(val) is val follows conventions for bool
    - try if string can be converted to list, tuple or dict; do so if possible
    - return val unchanged otherwise

    :param val: value to sanitize
    :return: sanitized (or unchanged) value
    &#34;&#34;&#34;
    if isinstance(val, (int, float, bool)) or isinstance(val, type) or type(val) == types.FunctionType:
        return val
    if Utils.is_int(str(val)):
        val = int(val)
    elif Utils.is_float(str(val)):
        val = float(val)
    elif isinstance(val, str) and val.lower() in (&#39;true&#39;, &#39;false&#39;, &#39;on&#39;, &#39;off&#39;, &#39;yes&#39;, &#39;no&#39;):
        val = Utils.to_bool(val)
    else:
        try:
            new = literal_eval(val)
            if type(new) in (list, dict, tuple):
                val = new
        except Exception:
            pass
    return val</code></pre>
</details>
</dd>
<dt id="multidevice.MD_Globals.update"><code class="name flex">
<span>def <span class="ident">update</span></span>(<span>d, u)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update(d, u):
    for k, v in u.items():
        if isinstance(v, abc.Mapping):
            d[k] = update(d.get(k, {}), v)
        else:
            d[k] = v
    return d</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="multidevice.MD_Globals.CommandsError"><code class="flex name class">
<span>class <span class="ident">CommandsError</span></span>
<span>(</span><span>*args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class CommandsError(Exception):
    pass</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>builtins.Exception</li>
<li>builtins.BaseException</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="multidevice" href="index.html">multidevice</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="multidevice.MD_Globals.sanitize_param" href="#multidevice.MD_Globals.sanitize_param">sanitize_param</a></code></li>
<li><code><a title="multidevice.MD_Globals.update" href="#multidevice.MD_Globals.update">update</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="multidevice.MD_Globals.CommandsError" href="#multidevice.MD_Globals.CommandsError">CommandsError</a></code></h4>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>